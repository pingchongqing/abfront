{"version":3,"file":"static/webpack/static\\development\\pages\\contact.js.372d2f5b79364197a4a0.hot-update.js","sources":["webpack:///./pages/contact.js"],"sourcesContent":["import React from 'react'\r\nimport Layout from '../components/layout'\r\nimport Router, { withRouter } from 'next/router'\r\nimport { parseTime } from '../utils'\r\nimport Head from 'next/head'\r\nimport { fetchArtclsDetail } from '../api'\r\n\r\nclass Contact extends React.Component {\r\n  static async getInitialProps({ req }) {\r\n    const result = await fetchArtclsDetail({ _id: '5d4d61008ee6b62c8892a62e' })\r\n    const contact = result.data\r\n    return { contact }\r\n  }\r\n  componentDidMount() {\r\n    //创建和初始化地图函数：\r\n    function initMap(){\r\n      createMap();//创建地图\r\n      setMapEvent();//设置地图事件\r\n      addMapControl();//向地图添加控件\r\n      addMarker();//向地图中添加marker\r\n    }\r\n  \r\n    //创建地图函数：\r\n    function createMap(){\r\n      var map = new BMap.Map(\"dituContent\");//在百度地图容器中创建一个地图\r\n      var point = new BMap.Point(115.7787010852, 28.1482020957);//定义一个中心点坐标\r\n      map.centerAndZoom(point,18);//设定地图的中心点和坐标并将地图显示在地图容器中\r\n      window.map = map;//将map变量存储在全局\r\n    }\r\n  \r\n    //地图事件设置函数：\r\n    function setMapEvent(){\r\n      map.enableDragging();//启用地图拖拽事件，默认启用(可不写)\r\n      map.enableScrollWheelZoom();//启用地图滚轮放大缩小\r\n      map.enableDoubleClickZoom();//启用鼠标双击放大，默认启用(可不写)\r\n      map.enableKeyboard();//启用键盘上下左右键移动地图\r\n    }\r\n  \r\n    //地图控件添加函数：\r\n    function addMapControl(){\r\n            //向地图中添加缩放控件\r\n      var ctrl_nav = new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE});\r\n      map.addControl(ctrl_nav);\r\n            //向地图中添加缩略图控件\r\n      var ctrl_ove = new BMap.OverviewMapControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,isOpen:1});\r\n      map.addControl(ctrl_ove);\r\n            //向地图中添加比例尺控件\r\n      var ctrl_sca = new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT});\r\n      map.addControl(ctrl_sca);\r\n    }\r\n    // 120.215671,30.212136\r\n    //标注点数组 115.7787010852,28.1482020957\r\n    //http://api.map.baidu.com/lbsapi/getpoint/index.html\r\n    var markerArr = [\r\n      {\r\n        title:\"公司地址\",\r\n        content:\"地址: 江西省丰城市紫云南大道1136号<br />总机: 0795-6288863<br />邮编: 331000\",\r\n        point:\"115.7787010852, 28.1482020957\",\r\n        isOpen:0,\r\n        icon:{w:30,h:30,l:0,t:0,x:6,lb:5}\r\n      }\r\n     ];\r\n    //创建marker\r\n    function addMarker(){\r\n      for(var i=0;i<markerArr.length;i++){\r\n        var json = markerArr[i];\r\n        var p0 = json.point.split(\",\")[0];\r\n        var p1 = json.point.split(\",\")[1];\r\n        var point = new BMap.Point(p0,p1);\r\n      var iconImg = createIcon(json.icon);\r\n      var marker = new BMap.Marker(point,{icon:iconImg});\r\n      var iw = createInfoWindow(i);\r\n      var label = new BMap.Label(json.title,{\"offset\":new BMap.Size(json.icon.lb-json.icon.x+10,-20)});\r\n      marker.setLabel(label);\r\n      map.addOverlay(marker);\r\n      label.setStyle({\r\n        borderColor:\"#808080\",\r\n        color:\"#333\",\r\n        cursor:\"pointer\"\r\n      });\r\n  \r\n      (function(){\r\n        var index = i;\r\n        var _iw = createInfoWindow(i);\r\n        var _marker = marker;\r\n  \r\n        //hsguojz\r\n        _marker.openInfoWindow(_iw);\r\n        //hsguojz end\r\n  \r\n        _marker.addEventListener(\"click\",function(){\r\n            this.openInfoWindow(_iw);\r\n          });\r\n          _iw.addEventListener(\"open\",function(){\r\n            _marker.getLabel().hide();\r\n          })\r\n          _iw.addEventListener(\"close\",function(){\r\n            //_marker.getLabel().show();\r\n          })\r\n        label.addEventListener(\"click\",function(){\r\n            _marker.openInfoWindow(_iw);\r\n          })\r\n        if(!!json.isOpen){\r\n          label.hide();\r\n          _marker.openInfoWindow(_iw);\r\n        }\r\n      })()\r\n      }\r\n    }\r\n    //创建InfoWindow\r\n    function createInfoWindow(i){\r\n      var json = markerArr[i];\r\n      var iw = new BMap.InfoWindow(\"<b class='iw_poi_title' title='\" + json.title + \"'>\" + json.title + \"</b><div class='iw_poi_content'>\"+json.content+\"</div>\");\r\n      return iw;\r\n    }\r\n    //创建一个Icon\r\n    function createIcon(json){\r\n      var icon = new BMap.Icon(\"./static/images/address.png\", new BMap.Size(json.w,json.h),{imageOffset: new BMap.Size(-json.l,-json.t),infoWindowOffset:new BMap.Size(json.lb+5,1),offset:new BMap.Size(json.x,json.h)})\r\n      return icon;\r\n    }\r\n    initMap();//创建和初始化地图\r\n  }\r\n  createMarkup = (html) => {\r\n    return { __html: html }\r\n  }\r\n  render() {\r\n    const { contact } = this.props\r\n    return (\r\n      <Layout>\r\n        <Head>\r\n          <script type=\"text/javascript\" src=\"http://api.map.baidu.com/api?key=&amp;v=1.1&amp;services=true\"></script>\r\n          <script type=\"text/javascript\" src=\"http://api.map.baidu.com/getscript?v=1.1&amp;ak=&amp;services=true&amp;t=20130716024058\"></script>\r\n          <link rel=\"stylesheet\" type=\"text/css\" href=\"http://api.map.baidu.com/res/11/bmap.css\" />\r\n        </Head>\r\n        <div class=\"snd-banner snd-contact\">\r\n          <div class=\"content-container\">\r\n            <img src=\"/static/images/contactbanner.jpg\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"content-box snd-news\">\r\n          <div className=\"content-container\">\r\n            <div className=\"backtolist\">\r\n              <span><a onClick={() => { Router.back() }}>返回</a></span>\r\n            </div>\r\n            <div className=\"newsdetail\">\r\n              <div id=\"dituContent\" style={{height: '440px', overflow: 'hidden'}}></div>\r\n              <div className=\"detailcontent\" dangerouslySetInnerHTML={this.createMarkup(contact.content)}></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Layout> \r\n    )\r\n  }  \r\n}\r\nexport default withRouter(Contact)\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AAmHA;AACA;AAAA;AAAA;AACA;AACA;;;;;;AAhHA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AADA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AALA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;;;AAIA;AAAA;AAEA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAIA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAMA;;;;;;;;;;;;AAjJA;;AACA;AAAA;AAAA;AACA;;AADA;AACA;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AALA;AACA;AAmJA;;;;A","sourceRoot":""}