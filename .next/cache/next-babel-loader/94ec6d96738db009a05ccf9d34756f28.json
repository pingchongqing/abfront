{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from 'react';\nimport Layout from '../components/layout';\nimport Router, { withRouter } from 'next/router';\nimport { parseTime } from '../utils';\nimport Head from 'next/head';\nimport { fetchArtclsDetail } from '../api';\n\nvar Contact =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Contact, _React$Component);\n\n  function Contact() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Contact);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Contact)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"createMarkup\", function (html) {\n      return {\n        __html: html\n      };\n    });\n\n    return _this;\n  }\n\n  _createClass(Contact, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //创建和初始化地图函数：\n      function initMap() {\n        createMap(); //创建地图\n\n        setMapEvent(); //设置地图事件\n\n        addMapControl(); //向地图添加控件\n\n        addMarker(); //向地图中添加marker\n      } //创建地图函数：\n\n\n      function createMap() {\n        var map = new BMap.Map(\"dituContent\"); //在百度地图容器中创建一个地图\n\n        var point = new BMap.Point(115.7787010852, 28.1482020957); //定义一个中心点坐标\n\n        map.centerAndZoom(point, 18); //设定地图的中心点和坐标并将地图显示在地图容器中\n\n        window.map = map; //将map变量存储在全局\n      } //地图事件设置函数：\n\n\n      function setMapEvent() {\n        map.enableDragging(); //启用地图拖拽事件，默认启用(可不写)\n\n        map.enableScrollWheelZoom(); //启用地图滚轮放大缩小\n\n        map.enableDoubleClickZoom(); //启用鼠标双击放大，默认启用(可不写)\n\n        map.enableKeyboard(); //启用键盘上下左右键移动地图\n      } //地图控件添加函数：\n\n\n      function addMapControl() {\n        //向地图中添加缩放控件\n        var ctrl_nav = new BMap.NavigationControl({\n          anchor: BMAP_ANCHOR_TOP_LEFT,\n          type: BMAP_NAVIGATION_CONTROL_LARGE\n        });\n        map.addControl(ctrl_nav); //向地图中添加缩略图控件\n\n        var ctrl_ove = new BMap.OverviewMapControl({\n          anchor: BMAP_ANCHOR_BOTTOM_RIGHT,\n          isOpen: 1\n        });\n        map.addControl(ctrl_ove); //向地图中添加比例尺控件\n\n        var ctrl_sca = new BMap.ScaleControl({\n          anchor: BMAP_ANCHOR_BOTTOM_LEFT\n        });\n        map.addControl(ctrl_sca);\n      } // 120.215671,30.212136\n      //标注点数组 115.7787010852,28.1482020957\n      //http://api.map.baidu.com/lbsapi/getpoint/index.html\n\n\n      var markerArr = [{\n        title: \"公司地址\",\n        content: \"地址: 江西省丰城市紫云南大道1136号<br />总机: 0795-6288863<br />邮编: 331000\",\n        point: \"115.7787010852, 28.1482020957\",\n        isOpen: 0,\n        icon: {\n          w: 30,\n          h: 30,\n          l: 0,\n          t: 0,\n          x: 6,\n          lb: 5\n        }\n      }]; //创建marker\n\n      function addMarker() {\n        for (var i = 0; i < markerArr.length; i++) {\n          var json = markerArr[i];\n          var p0 = json.point.split(\",\")[0];\n          var p1 = json.point.split(\",\")[1];\n          var point = new BMap.Point(p0, p1);\n          var iconImg = createIcon(json.icon);\n          var marker = new BMap.Marker(point, {\n            icon: iconImg\n          });\n          var iw = createInfoWindow(i);\n          var label = new BMap.Label(json.title, {\n            \"offset\": new BMap.Size(json.icon.lb - json.icon.x + 10, -20)\n          });\n          marker.setLabel(label);\n          map.addOverlay(marker);\n          label.setStyle({\n            borderColor: \"#808080\",\n            color: \"#333\",\n            cursor: \"pointer\"\n          });\n\n          (function () {\n            var index = i;\n\n            var _iw = createInfoWindow(i);\n\n            var _marker = marker; //hsguojz\n\n            _marker.openInfoWindow(_iw); //hsguojz end\n\n\n            _marker.addEventListener(\"click\", function () {\n              this.openInfoWindow(_iw);\n            });\n\n            _iw.addEventListener(\"open\", function () {\n              _marker.getLabel().hide();\n            });\n\n            _iw.addEventListener(\"close\", function () {//_marker.getLabel().show();\n            });\n\n            label.addEventListener(\"click\", function () {\n              _marker.openInfoWindow(_iw);\n            });\n\n            if (!!json.isOpen) {\n              label.hide();\n\n              _marker.openInfoWindow(_iw);\n            }\n          })();\n        }\n      } //创建InfoWindow\n\n\n      function createInfoWindow(i) {\n        var json = markerArr[i];\n        var iw = new BMap.InfoWindow(\"<b class='iw_poi_title' title='\" + json.title + \"'>\" + json.title + \"</b><div class='iw_poi_content'>\" + json.content + \"</div>\");\n        return iw;\n      } //创建一个Icon\n\n\n      function createIcon(json) {\n        var icon = new BMap.Icon(\"./static/images/address.png\", new BMap.Size(json.w, json.h), {\n          imageOffset: new BMap.Size(-json.l, -json.t),\n          infoWindowOffset: new BMap.Size(json.lb + 5, 1),\n          offset: new BMap.Size(json.x, json.h)\n        });\n        return icon;\n      }\n\n      initMap(); //创建和初始化地图\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var contact = this.props.contact;\n      return React.createElement(Layout, null, React.createElement(Head, null, React.createElement(\"script\", {\n        type: \"text/javascript\",\n        src: \"http://api.map.baidu.com/getscript?v=1.1&ak=&services=true&t=20130716024058\"\n      }), React.createElement(\"link\", {\n        rel: \"stylesheet\",\n        type: \"text/css\",\n        href: \"http://api.map.baidu.com/res/11/bmap.css\"\n      })), React.createElement(\"div\", {\n        className: \"snd-banner snd-contact\"\n      }, React.createElement(\"div\", {\n        className: \"content-container\"\n      }, React.createElement(\"img\", {\n        src: \"/static/images/contactbanner.jpg\"\n      }))), React.createElement(\"div\", {\n        className: \"content-box snd-news\"\n      }, React.createElement(\"div\", {\n        className: \"content-container\"\n      }, React.createElement(\"div\", {\n        className: \"backtolist\"\n      }, React.createElement(\"span\", null, React.createElement(\"a\", {\n        onClick: function onClick() {\n          Router.back();\n        }\n      }, \"\\u8FD4\\u56DE\"))), React.createElement(\"div\", {\n        className: \"newsdetail\"\n      }, React.createElement(\"div\", {\n        id: \"dituContent\",\n        style: {\n          height: '440px',\n          overflow: 'hidden'\n        }\n      }), React.createElement(\"div\", {\n        className: \"detailcontent\",\n        dangerouslySetInnerHTML: this.createMarkup(contact.content)\n      })))));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var req, result, contact;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                req = _ref.req;\n                _context.next = 3;\n                return fetchArtclsDetail({\n                  _id: '5d4d61008ee6b62c8892a62e'\n                });\n\n              case 3:\n                result = _context.sent;\n                contact = result.data;\n                return _context.abrupt(\"return\", {\n                  contact: contact\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Contact;\n}(React.Component);\n\nexport default withRouter(Contact);","map":{"version":3,"sources":["D:\\abfront\\pages\\contact.js"],"names":["React","Layout","Router","withRouter","parseTime","Head","fetchArtclsDetail","Contact","html","__html","initMap","createMap","setMapEvent","addMapControl","addMarker","map","BMap","Map","point","Point","centerAndZoom","window","enableDragging","enableScrollWheelZoom","enableDoubleClickZoom","enableKeyboard","ctrl_nav","NavigationControl","anchor","BMAP_ANCHOR_TOP_LEFT","type","BMAP_NAVIGATION_CONTROL_LARGE","addControl","ctrl_ove","OverviewMapControl","BMAP_ANCHOR_BOTTOM_RIGHT","isOpen","ctrl_sca","ScaleControl","BMAP_ANCHOR_BOTTOM_LEFT","markerArr","title","content","icon","w","h","l","t","x","lb","i","length","json","p0","split","p1","iconImg","createIcon","marker","Marker","iw","createInfoWindow","label","Label","Size","setLabel","addOverlay","setStyle","borderColor","color","cursor","index","_iw","_marker","openInfoWindow","addEventListener","getLabel","hide","InfoWindow","Icon","imageOffset","infoWindowOffset","offset","contact","props","back","height","overflow","createMarkup","req","_id","result","data","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Layout from '../components/layout'\r\nimport Router, { withRouter } from 'next/router'\r\nimport { parseTime } from '../utils'\r\nimport Head from 'next/head'\r\nimport { fetchArtclsDetail } from '../api'\r\n\r\nclass Contact extends React.Component {\r\n  static async getInitialProps({ req }) {\r\n    const result = await fetchArtclsDetail({ _id: '5d4d61008ee6b62c8892a62e' })\r\n    const contact = result.data\r\n    return { contact }\r\n  }\r\n  componentDidMount() {\r\n    //创建和初始化地图函数：\r\n    function initMap(){\r\n      createMap();//创建地图\r\n      setMapEvent();//设置地图事件\r\n      addMapControl();//向地图添加控件\r\n      addMarker();//向地图中添加marker\r\n    }\r\n  \r\n    //创建地图函数：\r\n    function createMap(){\r\n      var map = new BMap.Map(\"dituContent\");//在百度地图容器中创建一个地图\r\n      var point = new BMap.Point(115.7787010852, 28.1482020957);//定义一个中心点坐标\r\n      map.centerAndZoom(point,18);//设定地图的中心点和坐标并将地图显示在地图容器中\r\n      window.map = map;//将map变量存储在全局\r\n    }\r\n  \r\n    //地图事件设置函数：\r\n    function setMapEvent(){\r\n      map.enableDragging();//启用地图拖拽事件，默认启用(可不写)\r\n      map.enableScrollWheelZoom();//启用地图滚轮放大缩小\r\n      map.enableDoubleClickZoom();//启用鼠标双击放大，默认启用(可不写)\r\n      map.enableKeyboard();//启用键盘上下左右键移动地图\r\n    }\r\n  \r\n    //地图控件添加函数：\r\n    function addMapControl(){\r\n            //向地图中添加缩放控件\r\n      var ctrl_nav = new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE});\r\n      map.addControl(ctrl_nav);\r\n            //向地图中添加缩略图控件\r\n      var ctrl_ove = new BMap.OverviewMapControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,isOpen:1});\r\n      map.addControl(ctrl_ove);\r\n            //向地图中添加比例尺控件\r\n      var ctrl_sca = new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT});\r\n      map.addControl(ctrl_sca);\r\n    }\r\n    // 120.215671,30.212136\r\n    //标注点数组 115.7787010852,28.1482020957\r\n    //http://api.map.baidu.com/lbsapi/getpoint/index.html\r\n    var markerArr = [\r\n      {\r\n        title:\"公司地址\",\r\n        content:\"地址: 江西省丰城市紫云南大道1136号<br />总机: 0795-6288863<br />邮编: 331000\",\r\n        point:\"115.7787010852, 28.1482020957\",\r\n        isOpen:0,\r\n        icon:{w:30,h:30,l:0,t:0,x:6,lb:5}\r\n      }\r\n     ];\r\n    //创建marker\r\n    function addMarker(){\r\n      for(var i=0;i<markerArr.length;i++){\r\n        var json = markerArr[i];\r\n        var p0 = json.point.split(\",\")[0];\r\n        var p1 = json.point.split(\",\")[1];\r\n        var point = new BMap.Point(p0,p1);\r\n      var iconImg = createIcon(json.icon);\r\n      var marker = new BMap.Marker(point,{icon:iconImg});\r\n      var iw = createInfoWindow(i);\r\n      var label = new BMap.Label(json.title,{\"offset\":new BMap.Size(json.icon.lb-json.icon.x+10,-20)});\r\n      marker.setLabel(label);\r\n      map.addOverlay(marker);\r\n      label.setStyle({\r\n        borderColor:\"#808080\",\r\n        color:\"#333\",\r\n        cursor:\"pointer\"\r\n      });\r\n  \r\n      (function(){\r\n        var index = i;\r\n        var _iw = createInfoWindow(i);\r\n        var _marker = marker;\r\n  \r\n        //hsguojz\r\n        _marker.openInfoWindow(_iw);\r\n        //hsguojz end\r\n  \r\n        _marker.addEventListener(\"click\",function(){\r\n            this.openInfoWindow(_iw);\r\n          });\r\n          _iw.addEventListener(\"open\",function(){\r\n            _marker.getLabel().hide();\r\n          })\r\n          _iw.addEventListener(\"close\",function(){\r\n            //_marker.getLabel().show();\r\n          })\r\n        label.addEventListener(\"click\",function(){\r\n            _marker.openInfoWindow(_iw);\r\n          })\r\n        if(!!json.isOpen){\r\n          label.hide();\r\n          _marker.openInfoWindow(_iw);\r\n        }\r\n      })()\r\n      }\r\n    }\r\n    //创建InfoWindow\r\n    function createInfoWindow(i){\r\n      var json = markerArr[i];\r\n      var iw = new BMap.InfoWindow(\"<b class='iw_poi_title' title='\" + json.title + \"'>\" + json.title + \"</b><div class='iw_poi_content'>\"+json.content+\"</div>\");\r\n      return iw;\r\n    }\r\n    //创建一个Icon\r\n    function createIcon(json){\r\n      var icon = new BMap.Icon(\"./static/images/address.png\", new BMap.Size(json.w,json.h),{imageOffset: new BMap.Size(-json.l,-json.t),infoWindowOffset:new BMap.Size(json.lb+5,1),offset:new BMap.Size(json.x,json.h)})\r\n      return icon;\r\n    }\r\n    initMap();//创建和初始化地图\r\n  }\r\n  createMarkup = (html) => {\r\n    return { __html: html }\r\n  }\r\n  render() {\r\n    const { contact } = this.props\r\n    return (\r\n      <Layout>\r\n        <Head>\r\n          <script type=\"text/javascript\" src=\"http://api.map.baidu.com/getscript?v=1.1&amp;ak=&amp;services=true&amp;t=20130716024058\"></script>\r\n          <link rel=\"stylesheet\" type=\"text/css\" href=\"http://api.map.baidu.com/res/11/bmap.css\" />\r\n        </Head>\r\n        <div className=\"snd-banner snd-contact\">\r\n          <div className=\"content-container\">\r\n            <img src=\"/static/images/contactbanner.jpg\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"content-box snd-news\">\r\n          <div className=\"content-container\">\r\n            <div className=\"backtolist\">\r\n              <span><a onClick={() => { Router.back() }}>返回</a></span>\r\n            </div>\r\n            <div className=\"newsdetail\">\r\n              <div id=\"dituContent\" style={{height: '440px', overflow: 'hidden'}}></div>\r\n              <div className=\"detailcontent\" dangerouslySetInnerHTML={this.createMarkup(contact.content)}></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Layout> \r\n    )\r\n  }  \r\n}\r\nexport default withRouter(Contact)\r\n"]},"metadata":{},"sourceType":"module"}